# 04.深信服C卷



## 1.字符串匹配

### （1）别人AC的代码

01.用的递归-牛客97414

```cpp
#include <stdio.h>
#include <string.h>
#include <malloc.h>
 
int match(const char *str, const char *pattern)
{
    //TODO:
    int str_len = strlen(str), pattern_len = strlen(pattern);
    if (!str_len && !pattern_len)
        return 0;
    if (!pattern_len || !str_len)
        return -1;
    if (pattern[0] == '*') {
        for (int i = 0; str[i]; i++)
            if (0 == match(str + i, pattern + 1))
                return 0;
        return -1;
    } else if (pattern[0] == '?') {
        return match(str + 1, pattern + 1);
    } else {
        return pattern[0] == str[0] ? match(str + 1, pattern + 1) : -1;
    }
}
 
int input(char **src, char **ptn)
{
    char buf[10240];
     
    *src = NULL;
    *ptn = NULL;
    if (fgets(buf, sizeof(buf), stdin) == 0)
        goto failed_;
    *src = strdup(buf);
    if (fgets(buf, sizeof(buf), stdin) == 0)
        goto failed_;
    *ptn = strdup(buf);
    return 0;
failed_:
    if (*src)
        free(*src);
    if (*ptn)
        free(*ptn);
    *src = NULL;
    *ptn = NULL;
    return -1;
}
 
int main(int argc, char *argv[])
{
    char *src = NULL;
    char *ptn = NULL;
     
    if (input(&src, &ptn) < 0) {
        fprintf(stderr, "error\n");
        return 0;
    }
 
    if (match(src, ptn) == 0) {
        printf("match\n");
    } else {
        printf("unmatch\n");
    }
    return 0;
}

```

### （4）个人经验

看了别人的代码

发现，好久没有写代码。都没有考虑代码的健壮性

然后，看来他们的代码

感觉。自己对递归的思考还是没有很深刻。。。。

有人，还自己添加了头文件

还有人自己添加了一些函数，自行编写



## 2.字符串解析



## 3.围棋数气